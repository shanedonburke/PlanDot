<div class="page-container">
  <mat-toolbar color="primary">
    <mat-toolbar-row>
      <div class="primary-row">
        <span>plan0</span>
        <div [style.flexGrow]="1"></div>
        <button mat-icon-button [matMenuTriggerFor]="hamburgerMenu">
          <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #hamburgerMenu="matMenu" yPosition="below">
          <button
            *ngIf="!userAuthService.hasAuth()"
            (click)="userAuthService.login()"
            mat-menu-item
          >
            <mat-icon>login</mat-icon>
            <span>Login</span>
          </button>
          <button
            *ngIf="userAuthService.hasAuth()"
            (click)="userAuthService.logout()"
            mat-menu-item
          >
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </div>
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-toolbar>
    <mat-toolbar-row class="secondary-row">
      <button
        (click)="addNewItem()"
        mat-raised-button
        color="primary"
        class="new-item-btn"
      >
        New item
      </button>
      <button (click)="toggleGroupsMenu($event)" mat-button>Groups</button>
      <div
        *ngIf="isGroupsMenuVisible"
        (click)="$event.stopPropagation()"
        class="groups-menu"
      >
        <div class="groups-menu-row-container">
          <div
            *ngFor="let group of groupService.getGroups(); index as i"
            class="groups-menu-row"
          >
            <div class="groups-menu-row-content">
              <div
                [style.color]="groupService.getGroupTextColor(group)"
                [style.backgroundColor]="group.color"
                class="group-name-chip"
              >
                {{ group.name }}
              </div>
              <div class="groups-menu-row-controls">
                <button (click)="editGroup(group)" mat-icon-button>
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  (click)="userDataService.deleteGroup(group)"
                  mat-icon-button
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>
            <mat-divider></mat-divider>
          </div>
        </div>
        <button (click)="addGroup()" mat-button class="new-group-btn">
          New group
        </button>
      </div>
    </mat-toolbar-row>
  </mat-toolbar>
  <div class="page-content">
    <div class="sidenav">
      <button
        (click)="setView('group')"
        class="sidenav-btn"
        [ngClass]="{ 'sidenav-btn-selected': isGroupView() }"
      >
        <mat-icon fontSet="material-icons-outlined">view_agenda</mat-icon>
      </button>
      <button
        (click)="setView('month')"
        class="sidenav-btn"
        [ngClass]="{ 'sidenav-btn-selected': isMonthView() }"
      >
        <mat-icon>calendar_view_month</mat-icon>
      </button>
      <button
        (click)="setView('day')"
        class="sidenav-btn"
        [ngClass]="{ 'sidenav-btn-selected': isDayView() }"
      >
        <mat-icon fontSet="material-icons-outlined">calendar_view_day</mat-icon>
      </button>
    </div>
    <ng-container [ngSwitch]="getViewName()">
      <app-group-view *ngSwitchCase="'group'"></app-group-view>
      <app-month-view *ngSwitchCase="'month'"></app-month-view>
      <app-day-view *ngSwitchCase="'day'"></app-day-view>
    </ng-container>
  </div>
</div>
